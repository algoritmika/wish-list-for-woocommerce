/**
 * @summary Main JS of Wish list for WooCommerce plugin.
 *
 * This js is mainly responsible for adding / removing WooCommerce product items from Wish list through Ajax,
 * and to show a notification to user when Ajax response is complete.
 *
 * @version   1.3.4
 * @since     1.0.0
 * @requires  jQuery.js
 */
alg_wc_wl_get_toggle_wishlist_item_data=function(t){return data={action:alg_wc_wl_ajax.action_toggle_item,unlogged_user_id:alg_wc_wish_list.get_cookie("alg-wc-wl-user-id"),alg_wc_wl_item_id:t.attr("data-item_id")},data};var alg_wc_wish_list={};jQuery(function(t){alg_wc_wish_list={init:function(){t(document.body).on("click",alg_wc_wl_toggle_btn.btn_class,this.toggle_wishlist_item),this.handle_item_removal_from_wishlist_page(),this.setup_izitoast()},get_cookie:function(t){for(var i=t+"=",o=decodeURIComponent(document.cookie),_=o.split(";"),e=0;e<_.length;e++){for(var n=_[e];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(i))return n.substring(i.length,n.length)}return""},handle_item_removal_from_wishlist_page:function(){t("body").on("alg_wc_wl_toggle_wl_item",function(i){i.response.success&&(jQuery(".alg-wc-wl-view-table").length&&i.target.parents("tr").remove(),0==jQuery(".alg-wc-wl-view-table tbody tr").length&&(jQuery(".alg-wc-wl-view-table").remove(),jQuery(".alg-wc-wl-empty-wishlist").show(),t(".alg-wc-wl-social").remove()))})},convertToBoolean:function(t){return("string"==typeof t||t instanceof String)&&(t=t.toLowerCase()),Boolean(1==t|"true"===t)},toggle_wishlist_item:function(){var i=jQuery(alg_wc_wl_toggle_btn.btn_class+'[data-item_id="'+jQuery(this).attr("data-item_id")+'"]'),o=jQuery(this),_=alg_wc_wl_get_toggle_wishlist_item_data(o);o.hasClass("loading")||(o.addClass("loading"),jQuery.post(alg_wc_wl.ajaxurl,_,function(_){_.success&&(i.hasClass("remove")?(i.removeClass("remove"),i.addClass("add")):(i.removeClass("add"),i.addClass("remove"))),t("body").trigger({type:"alg_wc_wl_toggle_wl_item",item_id:o.attr("data-item_id"),target:o,response:_});var e=!1;alg_wc_wish_list.convertToBoolean(alg_wc_wish_list.get_notification_option("mobile"))&&alg_wc_wish_list.is_mobile()?e=!0:alg_wc_wish_list.convertToBoolean(alg_wc_wish_list.get_notification_option("desktop"))&&!alg_wc_wish_list.is_mobile()&&(e=!0),e&&alg_wc_wish_list.show_notification(_),o.removeClass("loading")}))},is_mobile:function(){return window.innerWidth<=800||window.innerHeight<=600},get_notification_option:function(i,o){var _=null;return"undefined"!=typeof o&&(_=o),"undefined"!=typeof alg_wc_wl_notification&&alg_wc_wl_notification.hasOwnProperty(i)&&!t.isEmptyObject(alg_wc_wl_notification[i])&&(_=alg_wc_wl_notification[i]),_},get_notification_icon:function(t){var i="fa fa-heart";switch(t.data.action){case"added":i=alg_wc_wish_list.get_notification_option("icon_add","fa fa-heart");break;case"removed":i=alg_wc_wish_list.get_notification_option("icon_remove","fa fa-heart-o");break;case"error":i=alg_wc_wish_list.get_notification_option("icon_error","fa fa-exclamation-circle");break;default:"undefined"!==t.data.icon&&(i=t.data.icon)}return i},show_notification:function(t){iziToast.destroy(),iziToast.show({message:t.data.message,icon:alg_wc_wish_list.get_notification_icon(t)})},setup_izitoast:function(){this.setup_notification_to_close_on_esc();var i={resetOnHover:!0,drag:!1,layout:2,theme:"dark",timeout:alg_wc_wish_list.get_notification_option("timeout",0),backgroundColor:"#000000",progressBar:alg_wc_wish_list.convertToBoolean(alg_wc_wish_list.get_notification_option("progressBar",!0)),position:alg_wc_wish_list.get_notification_option("position","center"),progressBarColor:"rgb(255, 255, 255)",class:"alg-wc-wl-izitoast",onClose:function(i,o,_){t("body").trigger({type:"alg_wc_wl_notification_close",message:jQuery(o).find("p.slideIn")})}};alg_wc_wish_list.convertToBoolean(alg_wc_wish_list.get_notification_option("ok_button",!1))&&(i.buttons=[["<button>OK</button>",function(t,i){t.hide({},i)}]]),iziToast.settings(i)},setup_notification_to_close_on_esc:function(){t(document).keyup(function(t){27==t.keyCode&&jQuery(".iziToast").length>0&&iziToast.hide({},".iziToast")})}},alg_wc_wish_list.init()}),jQuery(function(t){var i={init:function(){this.email_options_toggler(".alg-wc-wl-social-li .email",".alg-wc-wl-email-options"),this.handle_send_to_option()},email_options_toggler:function(i,o){var _=-1;t("body").on("click",i,function(i){var e=t(this);i.preventDefault(),_*=-1,1==_?e.addClass("active"):e.removeClass("active"),t(o).slideToggle()})},handle_send_to_option:function(){t("body").on("change",'input[name="alg_wc_wl_email_send_to"]',function(i){var o=t(this).val();"friends"==o?t(".alg-wc-wl-emails-input").show():"admin"==o&&t(".alg-wc-wl-emails-input").hide()})}};i.init()});var alg_wc_wl_thumb_btn_positioner={thumb_btn:null,offset:0,offset_single:0,offset_loop:0,thumb_btn_position:"topRight",buttons_count:0,repeater:null,init:function(){this.thumb_btn=jQuery("."+this.get_thumb_option("thumb_css_class","alg-wc-wl-thumb-btn")),this.thumb_btn_position=this.get_thumb_option("position","topLeft"),this.offset=parseInt(this.get_thumb_option("offset_loop",17)),this.offset_single=parseInt(this.get_thumb_option("offset_single",17)),this.offset_loop=parseInt(this.get_thumb_option("offset_loop",17)),this.thumb_btn.css("left","auto").css("top","auto").css("right","auto").css("bottom","auto"),this.position_btns_looping(),window.onresize=function(t){clearInterval(alg_wc_wl_thumb_btn_positioner.repeater),alg_wc_wl_thumb_btn_positioner.position_btns_looping()}},position_btns_looping:function(){this.repeater=setInterval(function(){alg_wc_wl_thumb_btn_positioner.position_btns()},200)},position_btns:function(){alg_wc_wl_thumb_btn_positioner.thumb_btn.each(function(){var t=alg_wc_wl_thumb_btn_positioner.offset,i=alg_wc_wl_thumb_btn_positioner.offset_single,o=alg_wc_wl_thumb_btn_positioner.offset_loop,_=!1;jQuery(this).hasClass("alg-wc-wl-thumb-btn-loop")?(t=o,_=!1):jQuery(this).hasClass("alg-wc-wl-thumb-btn-single")&&(t=i,_=!0);var e=jQuery(this).parent().find("img").eq(0);if(e.offset()&&e.parent().offset){var n=e.height()-jQuery(this).height()-t,s=t,l=t+e.offset().left-e.parent().offset().left,a=t+e.offset().left-e.parent().offset().left;if(alg_wc_wl_thumb_btn_positioner.thumb_btn_position.match(/bottom/i)&&jQuery(this).css("top",n),alg_wc_wl_thumb_btn_positioner.thumb_btn_position.match(/top/i)&&jQuery(this).css("top",s),alg_wc_wl_thumb_btn_positioner.thumb_btn_position.match(/right/i)&&jQuery(this).css("right",a),alg_wc_wl_thumb_btn_positioner.thumb_btn_position.match(/left/i)&&jQuery(this).css("left",l),_&&!jQuery(this).hasClass("positioned-on-parent")){var c=jQuery(this).parent().parent();c.append(jQuery(this)),jQuery(this).addClass("positioned-on-parent")}jQuery(this).show(),alg_wc_wl_thumb_btn_positioner.buttons_count++,alg_wc_wl_thumb_btn_positioner.stopRepeater()}})},stopRepeater:function(){alg_wc_wl_thumb_btn_positioner.buttons_count==alg_wc_wl_thumb_btn_positioner.thumb_btn.length&&(clearInterval(alg_wc_wl_thumb_btn_positioner.repeater),alg_wc_wl_thumb_btn_positioner.buttons_count=0)},get_thumb_option:function(t,i){var o=null;return"undefined"!=typeof i&&(o=i),"undefined"!=typeof alg_wc_wl_thumb&&alg_wc_wl_thumb.hasOwnProperty(t)&&!jQuery.isEmptyObject(alg_wc_wl_thumb[t])&&(o=alg_wc_wl_thumb[t]),o}};jQuery(function(t){alg_wc_wl_thumb_btn_positioner.init(),jQuery("body").trigger({type:"alg_wc_wl_thumb_btn_position",obj:alg_wc_wl_thumb_btn_positioner})});var alg_wc_wl_counter={};jQuery(function(t){alg_wc_wl_counter={counter_selector:".alg-wc-wl-counter",init:function(){t("body").on("alg_wc_wl_toggle_wl_item",function(i){t(alg_wc_wl_counter.counter_selector).length&&alg_wc_wl_counter.update_counter()})},update_counter:function(){t(alg_wc_wl_counter.counter_selector).length&&t.post(alg_wc_wl.ajaxurl,{action:alg_wc_wl_get_wl_ajax_action,ignore_excluded_items:!0},function(i){if(i.success){var o=i.data.wishlist;t(alg_wc_wl_counter.counter_selector).html(o.length)}})}},alg_wc_wl_counter.init(),t("body").trigger({type:"alg_wc_wl_counter",obj:alg_wc_wl_counter})});